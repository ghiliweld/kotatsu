<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="main.css" />
    <title>Kotatsu</title>
  </head>
  <body>
    <button id="reset">Reset Board</button>
    <div id="grid"></div>
    <script src="braidify-client.js"></script>
    <script>
      fetch("https://kotatsu-server-silk.vercel.app/api/board", {
        subscribe: { keep_alive: true },
      }).andThen((version) => {
        console.log("We got a new version!", version);
        // {
        //   version: "me",
        //   parents: ["mom", "dad"],
        //   patches: [{unit: "json", range: ".foo", content: "3"}]
        //   body:    "3"
        // }
        //   // Version will contain either patches *or* body
        const board = JSON.parse(version.body);
        console.log(board);
        const grid = document.getElementById("grid");
        for (let i = 1; i < 11; i++) {
          for (let j = 1; j < 11; j++) {
            let coord = board[`${i}_${j}`];
            grid.innerHTML += `<div class='cell' id='${i}_${j}' contenteditable=true>${coord}</div>`;
          }
        }
      });
    </script>
    <!--<script src="ui.js"></script>-->
  </body>
</html>
